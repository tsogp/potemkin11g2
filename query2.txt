-- для примера рассматривается пользователь с id = 1

-- выгрузка личной информации в профиль
SELECT
	(SELECT email FROM user) AS email,
	(SELECT username FROM user) AS username,
	(SELECT password FROM user) AS password,
	(SELECT phone_number FROM user) AS phone_number,
	(SELECT address FROM user) AS address,
	(SELECT birth_date FROM user) AS birth_date,
	(SELECT created_at FROM user) AS created_at
FROM user
WHERE user.id = 1;

-- выгрузка корзины пользователя (в корзине только неоплаченные товары)
SELECT
	(SELECT name FROM product WHERE id = product_id) AS product_name,
	price AS price,
	amount AS amount, 
	date_created AS date_when_added
FROM cart_item
WHERE cart_item.user_id = 1 AND cart_item.order_id IS NULL;

-- просмотр оплаченных заказов
SELECT
	total_price AS total_price,
	user_email AS user_email,
	user_phone AS user_phone,
	user_note AS user_note,
	address AS address,
	created_at AS payment_received_at
FROM purchased_order
WHERE purchased_order.user_id = 1;